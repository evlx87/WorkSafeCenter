{% extends 'base.html' %}
{% block title %}
WorkSafeCenter - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å
{% endblock %}
{% block content %}
<section style="background: transparent; box-shadow: none; padding: 0;">
  <div class="section-header" style="border-bottom: none; margin-bottom: 20px;">
    <h2 style="margin: 0;">üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å</h2>
    <div style="display: flex; gap: 10px;">
      {% if user.is_superuser %}
        <a href="{% url 'admin:auth_user_add' %}" class="button" style="background-color: #6c757d;">
          üë§ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        </a>
        <a href="{% url 'admin:auth_user_changelist' %}" class="button" style="background-color: #6c757d;">
          ‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
        </a>
      {% endif %}
    </div>
  </div>
</section>

<section>
  <h3 style="margin-top: 0; color: var(--primary-color); font-size: var(--font-size-xl); font-weight: var(--font-weight-semibold);">
    –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã –æ—Ö—Ä–∞–Ω—ã —Ç—Ä—É–¥–∞
  </h3>
  <p style="color: #666; margin-bottom: 20px; font-size: var(--font-size-sm);">
    –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ {{ today|date:"d.m.Y" }}
  </p>

  <div class="dashboard-grid">
    <div class="stat-card card-danger">
      <div class="stat-header">
        <h3>‚ö†Ô∏è –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –º–µ–¥–æ—Å–º–æ—Ç—Ä—ã</h3>
        <span class="trend negative">‚Üì 12%</span>
      </div>
      <div class="stat-value">{{ overdue_checks_count }}</div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: {% widthratio overdue_checks_count 100 100 %}%"></div>
      </div>
      <div class="stat-note">+3 –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é</div>
    </div>

    <div class="stat-card card-danger">
      <div class="stat-header">
        <h3>‚ö†Ô∏è –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂–∏</h3>
        <span class="trend negative">‚Üì 8%</span>
      </div>
      <div class="stat-value">{{ overdue_trainings_count }}</div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: {% widthratio overdue_trainings_count 100 100 %}%"></div>
      </div>
      <div class="stat-note">+2 –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é</div>
    </div>

    <div class="stat-card card-warning">
      <div class="stat-header">
        <h3>üìÖ –°–æ–±—ã—Ç–∏–π –≤ –±–ª–∏–∂–∞–π—à–∏–µ 30 –¥–Ω–µ–π</h3>
        <span class="trend positive">‚Üë 5%</span>
      </div>
      <div class="stat-value">{{ upcoming_events_count }}</div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: {% widthratio upcoming_events_count 100 100 %}%"></div>
      </div>
      <div class="stat-note">–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
    </div>

    <div class="stat-card card-success">
      <div class="stat-header">
        <h3>‚úÖ –ò–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –∑–∞ 30 –¥–Ω–µ–π</h3>
        <span class="trend {% if recent_incidents_count > 0 %}negative{% else %}positive{% endif %}">
          {% if recent_incidents_count > 0 %}‚Üì{% else %}‚Üë{% endif %} 100%
        </span>
      </div>
      <div class="stat-value">{{ recent_incidents_count }}</div>
      <div class="progress-bar">
        <div class="progress-fill" style="width: {% widthratio recent_incidents_count 10 100 %}%"></div>
      </div>
      <div class="stat-note">–¶–µ–ª—å: 0 –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</div>
    </div>
  </div>
</section>
{% endblock %}