<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}WorkSafeCenter{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <link rel="icon" href="{% static 'favicon.ico' %}">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
<header class="main-header">
  <div class="header-container">
    <a href="{% url 'index' %}" class="logo">
      WorkSafeCenter
    </a>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–µ–Ω—é -->
    {% include 'includes/main_menu.html' %}

    <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="user-actions">
      {% if user.is_authenticated %}
        <span class="user-info">{{ user.username }}</span>
        <a href="{% url 'notifications:notification_list' %}" class="notification-link" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">üîî</a>
        <form action="{% url 'accounts:logout' %}" method="post" class="logout-form">
          {% csrf_token %}
          <button type="submit" class="logout-btn">–í—ã–π—Ç–∏</button>
        </form>
      {% else %}
        <a href="{% url 'accounts:login' %}" class="login-link">–í–æ–π—Ç–∏</a>
      {% endif %}
    </div>
  </div>
</header>
<main class="container">
  {% if messages %}
    <div class="messages">
      {% for message in messages %}
        <div class="alert {{ message.tags }}">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}

  {% block content %}
  {% endblock %}
</main>

<footer class="main-footer">
    <p>&copy; {% now "Y" %} WorkSafeCenter. –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ö—Ä–∞–Ω–æ–π —Ç—Ä—É–¥–∞.</p>
</footer>
<script>
// –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
document.addEventListener('DOMContentLoaded', function() {
  const menuToggle = document.querySelector('.mobile-menu-toggle');
  const navMenu = document.querySelector('.main-nav');

  if (menuToggle && navMenu) {
    menuToggle.addEventListener('click', function() {
      navMenu.classList.toggle('active');
      this.classList.toggle('active');
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Å—Å—ã–ª–∫—É
    navMenu.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        navMenu.classList.remove('active');
        menuToggle.classList.remove('active');
      });
    });

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
    document.addEventListener('click', function(event) {
      if (!navMenu.contains(event.target) &&
          !menuToggle.contains(event.target) &&
          navMenu.classList.contains('active')) {
        navMenu.classList.remove('active');
        menuToggle.classList.remove('active');
      }
    });
  }
});
</script>
</body>
</html>